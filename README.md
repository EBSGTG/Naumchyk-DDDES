# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ1

### –ü—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º –∑ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∏–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–∏—Ö –≤ –µ–Ω–µ—Ä–≥–µ—Ç–∏—Ü—ñ

**–¢–µ–º–∞:** –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ Apache Kafka –¥–ª—è –µ–Ω–µ—Ä–≥–µ—Ç–∏—á–Ω–∏—Ö
IoT-–ø–æ—Ç–æ–∫—ñ–≤\
**–í–∞—Ä—ñ–∞–Ω—Ç:** 6 --- –¢–µ–ø–ª–æ–≤—ñ –µ–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü—ñ—ó –°—Ö—ñ–¥–Ω–æ—ó –£–∫—Ä–∞—ó–Ω–∏\
**–ü—ñ–¥–≤–∞—Ä—ñ–∞–Ω—Ç:** A (–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è real-time –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –∞–ª–µ—Ä—Ç—ñ–≤)

------------------------------------------------------------------------

## üéØ –ú–µ—Ç–∞ —Ä–æ–±–æ—Ç–∏

–î–æ—Å–ª—ñ–¥–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å Apache Kafka –¥–ª—è –ø–æ—Ç–æ–∫—ñ–≤ –¥–∞–Ω–∏—Ö –∑ —Ç–µ–ø–ª–æ–≤–∏—Ö
–µ–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü—ñ–π.\
–§–æ–∫—É—Å –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è:\
- –∫—Ä–∏—Ç–∏—á–Ω—ñ real-time –∞–ª–µ—Ä—Ç–∏\
- –∞–Ω–∞–ª—ñ–∑ 50th —Ç–∞ 95th percentile latency\
- –≤–ø–ª–∏–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `linger.ms` (1,2,3,5 ms)\
- –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ consumer lag —Ç–∞ network jitter

------------------------------------------------------------------------

## ‚öôÔ∏è –¢–µ—Å—Ç–æ–≤–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ

-   **OS:** Ubuntu 24.04\
-   **Java:** 11\
-   **Kafka:** 3.7.1 (single-broker), Zookeeper 3.8\
-   **Python:** 3.12\
-   **Hardware:** 4 vCores, 4 GB RAM, SSD

### –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ

-   –¢–∏–ø: –¥–∞–Ω—ñ –∑ —Ç–µ–ø–ª–æ–≤–∏—Ö –µ–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü—ñ–π –°—Ö—ñ–¥–Ω–æ—ó –£–∫—Ä–∞—ó–Ω–∏\
-   –§–æ—Ä–º–∞—Ç: JSON, 256 –±–∞–π—Ç\
-   –ö—ñ–ª—å–∫—ñ—Å—Ç—å: \~1100 –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤\
-   –ö–ª—é—á–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏: `fuel_flow`, `steam_pressure`, `power_output`,
    `efficiency`, `temperature`, `voltage`, `current`, `status`,
    `fuel_type`

------------------------------------------------------------------------

## üìä –û—Å–Ω–æ–≤–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

### Batch size —Ç–∞ linger.ms

  –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è   Records/sec   Avg Latency (ms)   –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
  -------------- ------------- ------------------ -----------------
  8KB, 0ms       650           4.5                Ultra real-time
  16KB, 0ms      900           6.0                Real-time
  64KB, 10ms     1500          12                 Balanced
  256KB, 50ms    2200          65                 Batch

üîπ **–û–ø—Ç–∏–º—É–º:** `64KB + 5ms ‚Üí ~1500 rec/sec –ø—Ä–∏ latency ~12ms`

### Compression

  ---------------------------------------------------------------------------
  –ê–ª–≥–æ—Ä–∏—Ç–º   Records/sec   Latency (ms) Compression Ratio –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
  ---------- ------------- ------------ ----------------- -------------------
  none       2100          5            0%                real-time –∞–ª–µ—Ä—Ç–∏

  snappy     1900          8            50%               load regulation

  lz4        1750          12           60%               fuel optimization

  zstd       1500          18           70%               –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—è
  ---------------------------------------------------------------------------

üîπ **–ë–∞–ª–∞–Ω—Å:** LZ4 (60% –∫–æ–º–ø—Ä–µ—Å—ñ—è, latency \<15ms)

### –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è (–ø–∞—Ä—Ç–∏—Ü—ñ—ó)

  –ü–∞—Ä—Ç–∏—Ü—ñ—ó   Records/sec   Scaling Factor   –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
  ---------- ------------- ---------------- --------------------
  4          1000          1.0x             Baseline
  8          1800          1.8x             Good scaling
  12         2500          2.5x             Near-linear growth

üîπ **–û–ø—Ç–∏–º—É–º:** 8 –ø–∞—Ä—Ç–∏—Ü—ñ–π –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ–≥–æ real-time + –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—ó

------------------------------------------------------------------------

## üõ† –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

-   **Real-time –∞–ª–µ—Ä—Ç–∏**

        batch.size=16KB, linger.ms=0, compression=none, partitions=4

    Latency \<5ms \| Throughput \>900 rec/sec

-   **Batch-–∞–Ω–∞–ª—ñ—Ç–∏–∫–∞**

        batch.size=64KB, linger.ms=10, compression=snappy, partitions=8

    –ï–∫–æ–Ω–æ–º—ñ—è \~40% \| Throughput \>1800 rec/sec

-   **–ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è**

        batch.size=128KB, linger.ms=50, compression=zstd, partitions=12

    –ï–∫–æ–Ω–æ–º—ñ—è \~70% \| –º—ñ–Ω—ñ–º—É–º –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É

------------------------------------------------------------------------

## üìå –í–∏—Å–Ω–æ–≤–∫–∏

-   **Latency ‚Üî Throughput trade-off** –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ\
-   **Zstd** –¥–∞—î –Ω–∞–π–∫—Ä–∞—â—É –∫–æ–º–ø—Ä–µ—Å—ñ—é (70%), **LZ4** --- –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–π
    –±–∞–ª–∞–Ω—Å\
-   **Scaling** –∑ –ø–∞—Ä—Ç–∏—Ü—ñ—è–º–∏ –±–ª–∏–∑—å–∫–∏–π –¥–æ –ª—ñ–Ω—ñ–π–Ω–æ–≥–æ

‚û°Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**\
`64KB + 5ms + LZ4 + 8 –ø–∞—Ä—Ç–∏—Ü—ñ–π ‚Üí ~1500 rec/sec –ø—Ä–∏ latency ~12ms`

–ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è:\
- SCADA —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É fuel_flow —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ\
- –ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –¥–ª—è environmental reporting\
- –ë–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º—ñ–∂ –±–ª–æ–∫–∞–º–∏ –¢–ï–° –∑–∞ fuel_type

------------------------------------------------------------------------

## üìÇ –î–æ–¥–∞—Ç–∫–∏

### A. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∞–Ω–∏—Ö (Python)

``` python
import random, json
N = 12

def generate_powerplant_data():
    return {
        "device_id": f"TESC_{random.randint(1, N):03d}",
        "fuel_flow": round(random.uniform(120.0, 250.0), 2),
        "steam_pressure": round(random.uniform(14.0, 23.0), 2),
        "temperature": round(random.uniform(480.0, 560.0), 1),
        "timestamp": "2025-09-27T12:00:00Z"
    }

for _ in range(3):
    print(json.dumps(generate_powerplant_data(), ensure_ascii=False))
```

### B. –¢–µ—Å—Ç–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏ Kafka

``` bash
kafka-producer-perf-test.sh   --topic test_powerplant   --num-records 100000   --record-size 256   --throughput -1   --producer-props bootstrap.servers=localhost:9092 batch.size=16384 linger.ms=0 compression.type=none
```

(—ñ–Ω—à—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è snappy —Ç–∞ zstd –Ω–∞–≤–µ–¥–µ–Ω—ñ –≤ –∑–≤—ñ—Ç—ñ)

------------------------------------------------------------------------

‚úçÔ∏è **–ê–≤—Ç–æ—Ä:** –ù–∞—É–º—á–∏–∫ –Ñ.–õ., –≥—Ä. –¢–†-52–º–ø\
üë®‚Äçüè´ **–í–∏–∫–ª–∞–¥–∞—á:** –í–æ–ª–∫–æ–≤ –û.–í.\
üìç –ö–ü–Ü —ñ–º. –Ü–≥–æ—Ä—è –°—ñ–∫–æ—Ä—Å—å–∫–æ–≥–æ, 2025
